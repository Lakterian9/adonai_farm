const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./chunk-DNRBx0XW.js","./chunk-BrHqqTfK.js","./chunk-BO6q4UjV.js","./chunk-CSkc87qm.js","./Animals-u8Osq7MI.js","./NotFound-C_OKttW9.js","./Login-C94kzMez.js"])))=>i.map(i=>d[i]);
import{s as e,j as t,i as n,l as s,h as r,r as i,k as o}from"./chunk-BrHqqTfK.js";import{a,R as c,r as l,b as d,d as m,N as h,B as u}from"./chunk-BO6q4UjV.js";import{P as p,E as f,a as g,H as b}from"./chunk-DNRBx0XW.js";import"./chunk-CSkc87qm.js";var y;!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var v=a;y=v.createRoot,v.hydrateRoot;const x={},w=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link"),r=document.querySelector("meta[property=csp-nonce]"),i=r?.nonce||r?.getAttribute("nonce");s=Promise.allSettled(t.map(t=>{if(t=function(e,t){return new URL(e,t).href}(t,n),t in x)return;x[t]=!0;const s=t.endsWith(".css"),r=s?'[rel="stylesheet"]':"";if(!!n)for(let n=e.length-1;n>=0;n--){const r=e[n];if(r.href===t&&(!s||"stylesheet"===r.rel))return}else if(document.querySelector(`link[href="${t}"]${r}`))return;const o=document.createElement("link");return o.rel=s?"stylesheet":"modulepreload",s||(o.as="script"),o.crossOrigin="",o.href=t,i&&o.setAttribute("nonce",i),document.head.appendChild(o),s?new Promise((e,n)=>{o.addEventListener("load",e),o.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${t}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})},j=["password","password_hash","token","session","api_key","secret","private","internal","admin","employee_id","hourly_rate","salary","cost","price","financial","breeding_records","health_records","veterinary","medical","treatment","medication","notes"];class _{static sanitizeObject(e,t=[]){if(!e||"object"!=typeof e)return e;const n=[...j,...t],s={};for(const[r,i]of Object.entries(e)){const e=r.toLowerCase();n.some(t=>e.includes(t.toLowerCase()))||(i&&"object"==typeof i?Array.isArray(i)?s[r]=i.map(e=>this.sanitizeObject(e,t)):s[r]=this.sanitizeObject(i,t):s[r]=i)}return s}static sanitizeAnimalData(e){if(!e)return e;const t=e=>{if(!e||"object"!=typeof e)return e;const t={id:e.id,type:e.type,name:e.name,sex:e.sex,breed:e.breed,age:e.age||this.calculateAge(e.dob),description:e.public_description||this.generatePublicDescription(e),category:e.category||this.categorizeAnimal(e.type),image:e.image,isPublic:!1!==e.isPublic};return e.fun_fact&&(t.funFact=e.fun_fact),e.public_notes&&(t.notes=e.public_notes),t};return Array.isArray(e)?e.filter(e=>!1!==e.isPublic).map(t):t(e)}static sanitizeWorkerData(e){if(!e)return e;const t=e=>e&&"object"==typeof e?{id:e.id,name:e.public_name||e.first_name||"Farm Staff",role:e.public_role||"Farm Team Member",specialties:e.public_specialties||[],bio:e.public_bio||""}:e;return Array.isArray(e)?e.filter(e=>!0===e.isPublic).map(t):t(e)}static sanitizeImageData(e){if(!e)return e;const t=e=>e&&"object"==typeof e?{id:e.id,filename:e.filename,url:e.url||e.path,category:e.category,caption:e.public_caption||e.caption,alt:e.alt,uploadedAt:e.uploaded_at,isPublic:!1!==e.isPublic}:e;return Array.isArray(e)?e.filter(e=>!1!==e.isPublic).map(t):t(e)}static calculateAge(e){if(!e)return"Unknown age";const t=new Date(e),n=new Date,s=12*(n.getFullYear()-t.getFullYear())+(n.getMonth()-t.getMonth());if(s<12)return`${s} months old`;{const e=Math.floor(s/12),t=s%12;return 0===t?`${e} year${e>1?"s":""} old`:`${e} year${e>1?"s":""}, ${t} month${t>1?"s":""} old`}}static generatePublicDescription(e){if(!e)return"";return{"Dairy Cattle":"One of our gentle dairy cows, providing fresh milk daily.","Beef Cattle":"A healthy member of our beef cattle herd.","Dairy Goat":"A friendly dairy goat known for producing quality milk.","Beef Goat":"Part of our goat herd, raised with care and attention.",Sheep:"A woolly member of our sheep flock.","Pedigree Sheep":"A prize-winning sheep with excellent bloodlines.",Chicken:"One of our free-range chickens, providing fresh eggs.",Poultry:"Part of our diverse poultry collection."}[e.type]||"A beloved member of our farm family."}static categorizeAnimal(e){if(!e)return"livestock";const t=e.toLowerCase();return t.includes("cattle")||t.includes("cow")||t.includes("bull")?"cattle":t.includes("goat")?"goats":t.includes("sheep")?"sheep":t.includes("chicken")||t.includes("poultry")?"poultry":"livestock"}static validatePublicData(e){const t=[],n=(e,s="")=>{if(e&&"object"==typeof e)for(const[r,i]of Object.entries(e)){const e=s?`${s}.${r}`:r,o=r.toLowerCase();j.some(e=>o.includes(e.toLowerCase()))&&t.push({type:"sensitive_field",path:e,field:r,message:`Potentially sensitive field "${r}" found`}),"string"==typeof i&&(i.includes("password")||i.includes("secret")||i.includes("token"))&&t.push({type:"sensitive_value",path:e,message:`Potentially sensitive value in field "${r}"`}),i&&"object"==typeof i&&(Array.isArray(i)?i.forEach((t,s)=>{n(t,`${e}[${s}]`)}):n(i,e))}};return n(e),{isValid:0===t.length,issues:t,riskLevel:0===t.length?"low":t.length<3?"medium":"high"}}}class E{static isAdminRoute(){const e=window.location.pathname;return e.startsWith("/dashboard")||e.startsWith("/admin")}static isAuthenticated(){const e=localStorage.getItem("adonai_token"),t=localStorage.getItem("adonai_session_expiry");return!(!e||!t)&&!(Date.now()>parseInt(t))}static filterDataForRoute(e,t){if(this.isAdminRoute()&&this.isAuthenticated())return e;switch(t){case"animals":return _.sanitizeAnimalData(e);case"workers":return _.sanitizeWorkerData(e);case"images":return _.sanitizeImageData(e);default:return _.sanitizeObject(e)}}static logDataAccess(e,t={}){const n={timestamp:(new Date).toISOString(),type:"data_access",dataType:e,route:window.location.pathname,isAdminRoute:this.isAdminRoute(),isAuthenticated:this.isAuthenticated(),userAgent:navigator.userAgent,...t};try{const e=JSON.parse(localStorage.getItem("adonai_data_access_logs")||"[]");e.push(n),e.length>50&&e.splice(0,e.length-50),localStorage.setItem("adonai_data_access_logs",JSON.stringify(e))}catch(s){}}}function S({children:n}){return c.useEffect(()=>{e.logEvent("public_route_access",{route:window.location.pathname,authenticated:!1}),E.logDataAccess("public_content",{route:window.location.pathname,userType:"public"})},[]),t.jsx(p,{children:n})}function P({children:n}){return c.useEffect(()=>{e.logEvent("authenticated_public_route_access",{route:window.location.pathname,authenticated:!0}),E.logDataAccess("public_content",{route:window.location.pathname,userType:"authenticated_public"})},[]),t.jsx(p,{children:n})}const L=c.lazy(()=>w(()=>import("./chunk-DNRBx0XW.js").then(e=>e.b),__vite__mapDeps([0,1,2,3]),import.meta.url)),k=c.lazy(()=>w(()=>import("./chunk-DNRBx0XW.js").then(e=>e.c),__vite__mapDeps([0,1,2,3]),import.meta.url)),T=c.lazy(()=>w(()=>import("./chunk-DNRBx0XW.js").then(e=>e.d),__vite__mapDeps([0,1,2,3]),import.meta.url)),A=c.lazy(()=>w(()=>import("./chunk-DNRBx0XW.js").then(e=>e.C),__vite__mapDeps([0,1,2,3]),import.meta.url)),M=c.lazy(()=>w(()=>import("./chunk-DNRBx0XW.js").then(e=>e.G),__vite__mapDeps([0,1,2,3]),import.meta.url)),D=c.lazy(()=>w(()=>import("./Animals-u8Osq7MI.js"),__vite__mapDeps([4,1,2,3,0]),import.meta.url)),z=c.lazy(()=>w(()=>import("./NotFound-C_OKttW9.js"),__vite__mapDeps([5,1,2,3,0]),import.meta.url)),I=c.lazy(()=>w(()=>import("./Login-C94kzMez.js"),__vite__mapDeps([6,1,2,3]),import.meta.url)),R=c.lazy(()=>w(()=>import("./chunk-BrHqqTfK.js").then(e=>e.A),__vite__mapDeps([1,2,3]),import.meta.url)),O=c.lazy(()=>w(()=>import("./chunk-BrHqqTfK.js").then(e=>e.D),__vite__mapDeps([1,2,3]),import.meta.url)),C=c.lazy(()=>w(()=>import("./chunk-BrHqqTfK.js").then(e=>e.B),__vite__mapDeps([1,2,3]),import.meta.url)),N=c.lazy(()=>w(()=>import("./chunk-BrHqqTfK.js").then(e=>e.W),__vite__mapDeps([1,2,3]),import.meta.url)),F=c.lazy(()=>w(()=>import("./chunk-BrHqqTfK.js").then(e=>e.R),__vite__mapDeps([1,2,3]),import.meta.url)),W=c.lazy(()=>w(()=>import("./chunk-BrHqqTfK.js").then(e=>e.q),__vite__mapDeps([1,2,3]),import.meta.url)),$=c.lazy(()=>w(()=>import("./chunk-BrHqqTfK.js").then(e=>e.t),__vite__mapDeps([1,2,3]),import.meta.url)),V=c.lazy(()=>w(()=>import("./chunk-BrHqqTfK.js").then(e=>e.U),__vite__mapDeps([1,2,3]),import.meta.url)),B=c.lazy(()=>w(()=>import("./chunk-BrHqqTfK.js").then(e=>e.v),__vite__mapDeps([1,2,3]),import.meta.url)),q=c.lazy(()=>w(()=>import("./chunk-BrHqqTfK.js").then(e=>e.C),__vite__mapDeps([1,2,3]),import.meta.url)),H=c.lazy(()=>w(()=>import("./chunk-BrHqqTfK.js").then(e=>e.w),__vite__mapDeps([1,2,3]),import.meta.url));function Y(){return o()}const G=()=>t.jsx("div",{className:"loading-container public-loading",children:t.jsxs("div",{className:"loading-spinner",children:[t.jsx("div",{className:"spinner-icon",children:"ðŸŒ¾"}),t.jsx("p",{children:"Loading Adonai Farm..."})]})}),U=()=>t.jsx("div",{className:"loading-container admin-loading",children:t.jsxs("div",{className:"loading-spinner",children:[t.jsx("div",{className:"spinner-icon",children:"âš™ï¸"}),t.jsx("p",{children:"Loading Dashboard..."})]})});function X({children:e}){return Y()?t.jsx(l.Suspense,{fallback:t.jsx(U,{}),children:t.jsx(R,{children:e})}):t.jsx(h,{to:"/login",replace:!0})}function J(){const e=Y();return l.useEffect(()=>{n()},[]),c.useEffect(()=>{if(e){const e=()=>{if(!Y())return s("session_expired",{reason:"automatic_logout"}),void(window.location.href="/login");if(r()){window.confirm("Your session will expire in 30 minutes. Would you like to extend it?")&&(i(),s("session_refreshed",{method:"user_prompt"}))}},t=setInterval(e,3e5);return e(),()=>clearInterval(t)}},[e]),t.jsx(f,{children:t.jsx("div",{className:"app",children:t.jsx("main",{children:t.jsxs(d,{children:[t.jsx(m,{path:"/",element:t.jsx(g,{componentName:"Homepage",children:t.jsx(l.Suspense,{fallback:t.jsx(G,{}),children:e?t.jsx(P,{children:t.jsx(L,{})}):t.jsx(S,{children:t.jsx(L,{})})})})}),t.jsx(m,{path:"/about",element:t.jsx(g,{componentName:"About",children:t.jsx(l.Suspense,{fallback:t.jsx(G,{}),children:e?t.jsx(P,{children:t.jsx(k,{})}):t.jsx(S,{children:t.jsx(k,{})})})})}),t.jsx(m,{path:"/services",element:t.jsx(g,{componentName:"Services",children:t.jsx(l.Suspense,{fallback:t.jsx(G,{}),children:e?t.jsx(P,{children:t.jsx(T,{})}):t.jsx(S,{children:t.jsx(T,{})})})})}),t.jsx(m,{path:"/contact",element:t.jsx(g,{componentName:"Contact",children:t.jsx(l.Suspense,{fallback:t.jsx(G,{}),children:e?t.jsx(P,{children:t.jsx(A,{})}):t.jsx(S,{children:t.jsx(A,{})})})})}),t.jsx(m,{path:"/gallery",element:t.jsx(g,{componentName:"Gallery",children:t.jsx(l.Suspense,{fallback:t.jsx(G,{}),children:e?t.jsx(P,{children:t.jsx(M,{})}):t.jsx(S,{children:t.jsx(M,{})})})})}),t.jsx(m,{path:"/animals",element:t.jsx(g,{componentName:"Animals",children:t.jsx(l.Suspense,{fallback:t.jsx(G,{}),children:e?t.jsx(P,{children:t.jsx(D,{})}):t.jsx(S,{children:t.jsx(D,{})})})})}),t.jsx(m,{path:"/login",element:t.jsx(f,{children:t.jsx(l.Suspense,{fallback:t.jsx(G,{}),children:t.jsx(I,{})})})}),t.jsx(m,{path:"/admin",element:t.jsx(h,{to:"/login",replace:!0})}),t.jsx(m,{path:"/dashboard",element:t.jsx(f,{children:t.jsx(X,{children:t.jsx(O,{})})})}),t.jsx(m,{path:"/dashboard/animals",element:t.jsx(f,{children:t.jsx(X,{children:t.jsx(D,{})})})}),t.jsx(m,{path:"/dashboard/breeding",element:t.jsx(f,{children:t.jsx(X,{children:t.jsx(C,{})})})}),t.jsx(m,{path:"/dashboard/workers",element:t.jsx(f,{children:t.jsx(X,{children:t.jsx(N,{})})})}),t.jsx(m,{path:"/dashboard/reports",element:t.jsx(f,{children:t.jsx(X,{children:t.jsx(F,{})})})}),t.jsx(m,{path:"/dashboard/account",element:t.jsx(f,{children:t.jsx(X,{children:t.jsx(W,{})})})}),t.jsx(m,{path:"/dashboard/inventory",element:t.jsx(f,{children:t.jsx(X,{children:t.jsx($,{})})})}),t.jsx(m,{path:"/dashboard/users",element:t.jsx(f,{children:t.jsx(X,{children:t.jsx(V,{})})})}),t.jsx(m,{path:"/dashboard/infrastructure",element:t.jsx(f,{children:t.jsx(X,{children:t.jsx(B,{})})})}),t.jsx(m,{path:"/dashboard/gallery",element:t.jsx(f,{children:t.jsx(X,{children:t.jsx(M,{})})})}),t.jsx(m,{path:"/dashboard/contact",element:t.jsx(f,{children:t.jsx(X,{children:t.jsx(q,{})})})}),t.jsx(m,{path:"/dashboard/public-content",element:t.jsx(f,{children:t.jsx(X,{children:t.jsx(H,{})})})}),t.jsx(m,{path:"*",element:t.jsx(g,{componentName:"NotFound",children:t.jsx(l.Suspense,{fallback:t.jsx(G,{}),children:t.jsx(z,{})})})})]})})})})}class K{constructor(){this.isMobile=this.detectMobile(),this.touchStartTime=0,this.touchStartPos={x:0,y:0},this.performanceMetrics={touchLatency:[],scrollPerformance:[],renderTime:[]},this.isMobile&&this.init()}detectMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768}init(){this.setupTouchEvents(),this.optimizeScrolling(),this.setupPerformanceMonitoring(),this.setupAccessibilityEnhancements(),this.setupGestureHandling()}setupTouchEvents(){document.addEventListener("touchstart",this.handleTouchStart.bind(this),{passive:!1}),document.addEventListener("touchend",this.handleTouchEnd.bind(this),{passive:!1}),document.addEventListener("touchmove",this.handleTouchMove.bind(this),{passive:!1});document.addEventListener("touchend",e=>{e.target.matches("button, .btn, input, select, textarea, .admin-tab, .card")&&(e.preventDefault(),setTimeout(()=>{e.target.click&&e.target.click()},10))})}handleTouchStart(e){this.touchStartTime=performance.now(),this.touchStartPos={x:e.touches[0].clientX,y:e.touches[0].clientY};const t=e.target.closest("button, .btn, .admin-tab, .card, .stat-card, .animal-card");t&&(t.classList.add("touch-active"),this.createRippleEffect(t,e.touches[0]))}handleTouchEnd(e){const t=performance.now()-this.touchStartTime;this.performanceMetrics.touchLatency.push(t),this.performanceMetrics.touchLatency.length>100&&this.performanceMetrics.touchLatency.shift();const n=e.target.closest("button, .btn, .admin-tab, .card, .stat-card, .animal-card");n&&setTimeout(()=>{n.classList.remove("touch-active")},150)}handleTouchMove(e){const t=e.touches[0].clientX,n=e.touches[0].clientY,s=t-this.touchStartPos.x,r=n-this.touchStartPos.y;if(Math.sqrt(s*s+r*r)>10){const t=e.target.closest("button, .btn, .admin-tab, .card, .stat-card, .animal-card");t&&t.classList.remove("touch-active")}}createRippleEffect(e,t){const n=e.getBoundingClientRect(),s=document.createElement("div"),r=Math.max(n.width,n.height);s.style.cssText="\n      position: absolute;\n      border-radius: 50%;\n      background: rgba(74, 158, 255, 0.3);\n      transform: scale(0);\n      animation: ripple 0.6s linear;\n      pointer-events: none;\n      z-index: 1000;\n    ",s.style.width=s.style.height=r+"px",s.style.left=t.clientX-n.left-r/2+"px",s.style.top=t.clientY-n.top-r/2+"px",e.style.position="relative",e.style.overflow="hidden",e.appendChild(s),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s)},600)}optimizeScrolling(){document.documentElement.style.scrollBehavior="smooth";document.querySelectorAll(".admin-container, .modal, .card").forEach(e=>{e.style.webkitOverflowScrolling="touch",e.style.overscrollBehavior="contain"});let e=0,t=!1;document.addEventListener("scroll",()=>{t||(e=performance.now(),t=!0)},{passive:!0}),document.addEventListener("scrollend",()=>{if(t){const n=performance.now()-e;this.performanceMetrics.scrollPerformance.push(n),this.performanceMetrics.scrollPerformance.length>50&&this.performanceMetrics.scrollPerformance.shift(),t=!1}},{passive:!0})}setupPerformanceMonitoring(){let e=performance.now(),t=0,n=60;const s=()=>{const r=performance.now();t++,r-e>=1e3&&(n=Math.round(1e3*t/(r-e)),t=0,e=r),requestAnimationFrame(s)};requestAnimationFrame(s),performance.memory&&setInterval(()=>{const e=performance.memory;e.usedJSHeapSize,e.jsHeapSizeLimit},3e4)}setupAccessibilityEnhancements(){document.querySelectorAll("button, .btn, a, input, select, textarea").forEach(e=>{const t=e.getBoundingClientRect();(t.width<44||t.height<44)&&(e.style.minWidth="44px",e.style.minHeight="44px",e.style.padding="12px 16px")}),document.addEventListener("keydown",e=>{"Tab"===e.key&&document.body.classList.add("keyboard-navigation")}),document.addEventListener("mousedown",()=>{document.body.classList.remove("keyboard-navigation")});window.addEventListener("popstate",()=>{(e=>{const t=document.createElement("div");t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.style.position="absolute",t.style.left="-10000px",t.textContent=e,document.body.appendChild(t),setTimeout(()=>{document.body.removeChild(t)},1e3)})(`Navigated to ${document.title}`)})}setupGestureHandling(){let e=0,t=0,n=0;document.addEventListener("touchstart",s=>{1===s.touches.length&&(e=s.touches[0].clientX,t=s.touches[0].clientY,n=Date.now())},{passive:!0}),document.addEventListener("touchend",s=>{if(1===s.changedTouches.length){const r=s.changedTouches[0].clientX,i=s.changedTouches[0].clientY,o=Date.now(),a=r-e,c=i-t,l=o-n,d=50,m=300;Math.abs(a)>d&&l<m&&(a>0?this.handleSwipeRight(s):this.handleSwipeLeft(s)),Math.abs(c)>d&&l<m&&(c>0?this.handleSwipeDown(s):this.handleSwipeUp(s))}},{passive:!0})}handleSwipeRight(e){}handleSwipeLeft(e){}handleSwipeUp(e){}handleSwipeDown(e){}getPerformanceMetrics(){const e=this.performanceMetrics.touchLatency.length>0?this.performanceMetrics.touchLatency.reduce((e,t)=>e+t,0)/this.performanceMetrics.touchLatency.length:0,t=this.performanceMetrics.scrollPerformance.length>0?this.performanceMetrics.scrollPerformance.reduce((e,t)=>e+t,0)/this.performanceMetrics.scrollPerformance.length:0;return{isMobile:this.isMobile,averageTouchLatency:e.toFixed(2)+"ms",averageScrollTime:t.toFixed(2)+"ms",touchSamples:this.performanceMetrics.touchLatency.length,scrollSamples:this.performanceMetrics.scrollPerformance.length}}optimizeForDevice(){const e=window.innerWidth;window.innerHeight;(window.devicePixelRatio||1)>2&&document.documentElement.style.setProperty("--mobile-border-width","0.5px"),e<360&&(document.documentElement.style.setProperty("--mobile-font-size","14px"),document.documentElement.style.setProperty("--mobile-padding","8px")),e>600&&e<=768&&document.documentElement.style.setProperty("--mobile-grid-columns","2")}addTouchFeedbackStyles(){const e=document.createElement("style");e.textContent="\n      @keyframes ripple {\n        to {\n          transform: scale(4);\n          opacity: 0;\n        }\n      }\n      \n      .touch-active {\n        transform: scale(0.98) !important;\n        transition: transform 0.1s ease !important;\n      }\n      \n      .keyboard-navigation *:focus {\n        outline: 2px solid var(--mobile-accent, #4a9eff) !important;\n        outline-offset: 2px !important;\n      }\n      \n      /* Enhanced touch targets for mobile */\n      @media (max-width: 768px) {\n        button, .btn, a, input, select, textarea {\n          min-height: 44px !important;\n          min-width: 44px !important;\n          touch-action: manipulation !important;\n        }\n        \n        /* Prevent text selection on touch */\n        .admin-container * {\n          -webkit-user-select: none !important;\n          -moz-user-select: none !important;\n          -ms-user-select: none !important;\n          user-select: none !important;\n        }\n        \n        /* Allow text selection in inputs and content areas */\n        input, textarea, .animal-notes, .modal p {\n          -webkit-user-select: text !important;\n          -moz-user-select: text !important;\n          -ms-user-select: text !important;\n          user-select: text !important;\n        }\n      }\n    ",document.head.appendChild(e)}}let Q=null;"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{Q=new K,Q.addTouchFeedbackStyles(),Q.optimizeForDevice()}):(Q=new K,Q.addTouchFeedbackStyles(),Q.optimizeForDevice()),window.addEventListener("orientationchange",()=>{setTimeout(()=>{Q&&Q.optimizeForDevice()},100)});const Z=new class{constructor(){this.metrics=new Map,this.observers=new Map,this.isEnabled="true"===localStorage.getItem("performance-monitoring"),this.isEnabled&&this.initializeObservers()}initializeObservers(){if("PerformanceObserver"in window)try{const e=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{"navigation"===e.entryType&&this.recordNavigationMetrics(e)})});e.observe({entryTypes:["navigation"]}),this.observers.set("navigation",e);const t=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{"resource"===e.entryType&&this.recordResourceMetrics(e)})});t.observe({entryTypes:["resource"]}),this.observers.set("resource",t);const n=new PerformanceObserver(e=>{const t=e.getEntries(),n=t[t.length-1];this.recordMetric("LCP",n.startTime)});n.observe({entryTypes:["largest-contentful-paint"]}),this.observers.set("lcp",n);const s=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{this.recordMetric("FID",e.processingStart-e.startTime)})});s.observe({entryTypes:["first-input"]}),this.observers.set("fid",s);let r=0;const i=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{e.hadRecentInput||(r+=e.value)}),this.recordMetric("CLS",r)});i.observe({entryTypes:["layout-shift"]}),this.observers.set("cls",i)}catch(e){}}recordNavigationMetrics(e){const t={"DNS Lookup":e.domainLookupEnd-e.domainLookupStart,"TCP Connection":e.connectEnd-e.connectStart,"TLS Handshake":e.secureConnectionStart>0?e.connectEnd-e.secureConnectionStart:0,Request:e.responseStart-e.requestStart,Response:e.responseEnd-e.responseStart,"DOM Processing":e.domContentLoadedEventStart-e.responseEnd,"Resource Loading":e.loadEventStart-e.domContentLoadedEventStart,"Total Load Time":e.loadEventEnd-e.navigationStart,"Time to Interactive":e.domInteractive-e.navigationStart,"DOM Content Loaded":e.domContentLoadedEventEnd-e.navigationStart};Object.entries(t).forEach(([e,t])=>{this.recordMetric(e,t)})}recordResourceMetrics(e){const t=this.getResourceType(e.name),n=e.responseEnd-e.startTime;this.metrics.has(`${t}_load_times`)||this.metrics.set(`${t}_load_times`,[]),this.metrics.get(`${t}_load_times`).push({name:e.name,loadTime:n,size:e.transferSize||0,cached:0===e.transferSize&&e.decodedBodySize>0})}getResourceType(e){return e.includes(".js")?"javascript":e.includes(".css")?"stylesheet":e.match(/\.(jpg|jpeg|png|gif|webp|svg)$/i)?"image":e.includes("/api/")?"api":"other"}recordMetric(e,t){this.isEnabled&&(this.metrics.has(e)||this.metrics.set(e,[]),this.metrics.get(e).push({value:t,timestamp:Date.now()}))}startTiming(e){if(!this.isEnabled)return;const t=performance.now();return{end:()=>{const n=performance.now();return this.recordMetric(e,n-t),n-t}}}measureComponentRender(e,t){if(!this.isEnabled)return t();const n=this.startTiming(`${e}_render`),s=t();return n.end(),s}measureImageLoad(e){return this.isEnabled?new Promise(t=>{const n=this.startTiming("image_load"),s=new Image;s.onload=()=>{const e=n.end();this.recordMetric("image_load_success",e),t({success:!0,loadTime:e})},s.onerror=()=>{const e=n.end();this.recordMetric("image_load_error",e),t({success:!1,loadTime:e})},s.src=e}):Promise.resolve()}getPerformanceReport(){if(!this.isEnabled)return null;const e={timestamp:(new Date).toISOString(),metrics:{},summary:{}};return this.metrics.forEach((t,n)=>{if(Array.isArray(t)&&t.length>0){const s=t.map(e=>"object"==typeof e?e.value:e);e.metrics[n]={count:t.length,average:s.reduce((e,t)=>e+t,0)/s.length,min:Math.min(...s),max:Math.max(...s),latest:s[s.length-1]}}}),e.summary=this.generatePerformanceSummary(e.metrics),e}generatePerformanceSummary(e){const t={score:100,issues:[],recommendations:[]};if(e.LCP&&e.LCP.latest>2500&&(t.score-=20,t.issues.push("Largest Contentful Paint is slow"),t.recommendations.push("Optimize image loading and reduce server response time")),e.FID&&e.FID.latest>100&&(t.score-=15,t.issues.push("First Input Delay is high"),t.recommendations.push("Reduce JavaScript execution time and optimize event handlers")),e.CLS&&e.CLS.latest>.1&&(t.score-=15,t.issues.push("Cumulative Layout Shift is high"),t.recommendations.push("Reserve space for images and avoid inserting content above existing content")),e["Total Load Time"]&&e["Total Load Time"].latest>3e3&&(t.score-=10,t.issues.push("Total page load time is slow"),t.recommendations.push("Enable code splitting and optimize bundle size")),e.image_load_times){e.image_load_times.average>1e3&&(t.score-=10,t.issues.push("Image loading is slow"),t.recommendations.push("Implement image optimization and lazy loading"))}return t}logPerformanceReport(){if(!this.isEnabled)return;const e=this.getPerformanceReport();e&&(e.summary.issues.length>0&&e.summary.issues.forEach(e=>{}),e.summary.recommendations.length>0&&e.summary.recommendations.forEach(e=>{}),Object.entries(e.metrics).forEach(([e,t])=>{}))}async testBundlePerformance(){if(!this.isEnabled)return;const e=this.startTiming("bundle_analysis");try{const t=Array.from(document.querySelectorAll("script[src]")),n=Array.from(document.querySelectorAll('link[rel="stylesheet"]')),s={scripts:t.length,stylesheets:n.length,totalResources:t.length+n.length},r=t.some(e=>e.src.includes("chunk")||e.src.includes("lazy"));return s.hasCodeSplitting=r,e.end(),s}catch(t){return e.end(),null}}testBrowserCompatibility(){if(!this.isEnabled)return;const e={"Intersection Observer":"IntersectionObserver"in window,"Service Worker":"serviceWorker"in navigator,"Web Workers":"Worker"in window,"Local Storage":"localStorage"in window,"Session Storage":"sessionStorage"in window,"Fetch API":"fetch"in window,Promise:"Promise"in window,"ES6 Classes":(()=>{try{return"function"==typeof class{}}catch(e){return!1}})(),"CSS Grid":CSS.supports("display","grid"),"CSS Flexbox":CSS.supports("display","flex"),"WebP Support":0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")};return Object.entries(e).forEach(([e,t])=>{}),e}testMobilePerformance(){if(!this.isEnabled)return;const e=window.innerWidth<=768,t="ontouchstart"in window,n=window.devicePixelRatio||1,s={isMobile:e,touchSupport:t,devicePixelRatio:n,screenSize:{width:window.screen.width,height:window.screen.height},viewportSize:{width:window.innerWidth,height:window.innerHeight},connection:navigator.connection?{effectiveType:navigator.connection.effectiveType,downlink:navigator.connection.downlink,rtt:navigator.connection.rtt}:null};return s.connection&&s.connection.effectiveType,s}async runPerformanceTest(){if(!this.isEnabled)return;const e={timestamp:(new Date).toISOString(),bundle:await this.testBundlePerformance(),browser:this.testBrowserCompatibility(),mobile:this.testMobilePerformance(),metrics:this.getPerformanceReport()};return setTimeout(()=>{this.logPerformanceReport()},2e3),e}enable(){this.isEnabled=!0,localStorage.setItem("performance-monitoring","true"),this.initializeObservers()}disable(){this.isEnabled=!1,localStorage.removeItem("performance-monitoring"),this.observers.forEach(e=>e.disconnect()),this.observers.clear()}destroy(){this.observers.forEach(e=>e.disconnect()),this.observers.clear(),this.metrics.clear()}},{recordMetric:ee,startTiming:te,measureComponentRender:ne,measureImageLoad:se,getPerformanceReport:re,logPerformanceReport:ie,testBundlePerformance:oe,testBrowserCompatibility:ae,testMobilePerformance:ce,runPerformanceTest:le,enable:de,disable:me}=Z;let he;"undefined"!=typeof window&&(window.performanceMonitor=Z),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{e.addEventListener("updatefound",()=>{const t=e.installing;t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&confirm("A new version of Adonai Farm is available. Would you like to update?")&&window.location.reload()})})}).catch(e=>{})}),window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),he=e,function(){const e=document.createElement("div");e.className="pwa-install-prompt",e.innerHTML='\n    <div style="flex: 1;">\n      <strong>ðŸ“± Install Adonai Farm</strong><br>\n      <small>Add to your home screen for quick access</small>\n    </div>\n    <button class="btn install-btn">Install</button>\n    <button class="btn dismiss-btn" style="background: transparent; color: white;">Later</button>\n  ',document.body.appendChild(e),setTimeout(()=>{e.classList.add("show")},1e3),e.querySelector(".install-btn").addEventListener("click",async()=>{if(he){he.prompt();const{outcome:e}=await he.userChoice;he=null}e.remove()}),e.querySelector(".dismiss-btn").addEventListener("click",()=>{e.remove(),localStorage.setItem("pwa-install-dismissed",Date.now().toString())}),setTimeout(()=>{document.body.contains(e)&&e.remove()},1e4)}()}),window.addEventListener("load",()=>{const e=localStorage.getItem("pwa-install-dismissed");if(e){const t=parseInt(e);if((Date.now()-t)/36e5<24)return;localStorage.removeItem("pwa-install-dismissed")}}),y(document.getElementById("root")).render(t.jsx(c.StrictMode,{children:t.jsx(b,{children:t.jsx(u,{children:t.jsx(J,{})})})}));
